<!doctype html>
<html>
  <head>
    <title>i can feel it</title>
    <!-- <link href="/patr0nage.css" rel="stylesheet"> -->
    <script src="/feeling-systems.bundled.js"></script>
    <script>
    </script>
    <style>
    body {
      font-size: 14pt;
      font-family: sans-serif;
    }
    .wavy {
      font-size: 100px;
      filter: url(#displacementFilter)
    }
    #you-wont-believe-this {
      position: fixed;
      bottom: 0px;
      left: 40px;
    }
    </style>
  </head>
  <body>
    <!--
      <pre>pr0m</pre>
      what's next?
    -->
    <svg
      width="600"
      height="350"
      viewBox="0 0 600 350"
      xmlns="http://www.w3.org/2000/svg"
      id="you-wont-believe-this"
      >
      <filter id="displacementFilter">
      <feTurbulence
        type="turbulence"
        baseFrequency="0.010"
        numOctaves="2"
        result="turbulence" />
      <feOffset 
        in="turbulence"
        dx="100"
        dy="0"
        result="offy"
        id="offy"
        />
      <feDisplacementMap
        in2="offy"
        in="SourceGraphic"
        scale="26"
        xChannelSelector="R"
        yChannelSelector="G"
        id="displacey"
        />
      </filter>

      <!-- <circle cx="100" cy="100" r="100" style="filter: url(#displacementFilter)" /> -->
      <text x="0" y="100" class="wavy">you won'</text>
      <text x="0" y="200" class="wavy">t believe</text>
      <text x="0" y="300" class="wavy">this</text>

    </svg>

    <script>
      let svg = document.getElementById("offy");
      let dis = document.getElementById("displacey");
      let scale = 1.0;

      window.addEventListener("mousemove", function (ev) {
        let y = ev.clientY;
        scale = (y/window.innerHeight)*52;
      });

      (function move() {
        let t = +new Date() / 1000.0;
        let x = 10*Math.cos(t);
        let y = 10*Math.sin(t);

        requestAnimationFrame(move);
        svg.dx.baseVal = x;
        svg.dy.baseVal = y;
        dis.scale.baseVal = (1.0+Math.cos(t/3.0+500))*0.5*22;
      }());
    </script>

  </body>
</html>
